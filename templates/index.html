<!-- This is the template for the index page, containing the data to be
     sent to the invoice. Fields are defined in html.py -->
{% extends "layout.html" %}
{% block body %}

<script src="http://maps.google.com/maps/api/js"></script>

<!-- Get coordinates and generate Google map -->
<script>
  x = navigator.geolocation;
  x.getCurrentPosition(success, failure);
  function success(position)
  {
    // save coordiates for later
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    
    // Google ready coordinates
    var coords = new google.maps.LatLng(lat, long);

    // set options for map (max zoom = 20)
    var mapOptions = {
      zoom: 16,
      center: coords,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    // create map with marker at coordinates
    var map = new google.maps.Map(document.getElementById("map"), mapOptions);
    var marker = new google.maps.Marker({map: map, position: coords});
  }
  function failure()
  {
    $('#latitude').html("<p>Co-ordinates not availables</p>");
  }
</script>

<style>
#map {
  width:400px;
  height:400px;
}
</style>

<style>
.check-row {
	width: 0% !important;
}
</style>
<div class="container">
		<!-- Introduction Text -->
	<h4>Tampa/Hillsborough Continuum of Care</h4>
	<h4>Point in Time (PIT) Survey</h4><br/>
	

	<form method='post' action="{{ url_for('submit_form') }}">
	<p>Hello, my name is 
	<input type="text" size="15" name="volunteer"/>
	and Iâ€™m a volunteer for the Tampa/Hillsborough Continuum of Care.  We are conducting a survey to count homeless people to provide better services to them in our community.  Your participation is voluntary and your responses will not be shared with anyone outside of our team.  I need to read each question all the way through.  May I have a few minutes of your time?</p>
	<p>If the person declines to participate please gather as much identifying/descriptive info as possible on the observation survey.</p>
		<!-- General information block -->
		<p class="lead"><span class="glyphicon glyphicon-info-sign"></span>General Information</p>
		<div class="well">
			<div class="row">
				{% for item in general_inputs.inputs %}
					<div class="col-md-3">
						<b>{{ item.label }}</b>
						<input type="text" class="form-control input-sm" name="{{ item.id }}"/>
				  	</div>
				{% endfor %}
			</div>
		</div>
		<p>
		<img src="stop.png" alt="Stop sign" style="width:30px;height:30px;">
		 Stop Survey if person reports they are living in a non-homeless situation.  Examples include:  Rental apartment/home, staying or living with friends or family, permanent supportive housing, long term care or nursing home, residential project or halfway house, or hotel/motel paid for by self.</p>
		<div id="map">
		<!--- Google Maps divider -->
		</div>

		<div id="latitude">
		</div>

		<div id="longitude">
		</div>
		
		<!-- Submit -->
		<p class="lead"><span class="glyphicon glyphicon-check"></span>Submit</p>
		<div class="well">
			<div class="row">
				<div class="col-md-12">
					<button type="submit" class="btn fit-width btn-primary">Submit Information</button> 
				</div> 
			</div>
		</div>
	</form>
</div>
{% endblock %}

